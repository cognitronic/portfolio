$.cloudinary.config().cloud_name="raven-art-media",$.cloudinary.config().api_key="194632662182779",$.cloudinary.config().upload_preset="ormwe5hh",angular.module("danny.ui",["danny.ui.services","danny.ui.tpls","danny.ui.change-password","danny.ui.login"]),angular.module("danny.ui.tpls",["template/components/change-password.tpl.html","template/components/login.tpl.html"]),angular.module("danny.ui.services",["danny.ui.utility.service","danny.ui.post.service","danny.ui.profile.service","danny.ui.portfolio.service","danny.ui.resume.service","danny.ui.email.service"]),angular.module("danny",["ui.router","ui.bootstrap","ram-utilities.ui","danny.ui","angularFileUpload","textAngular","cloudinary"]).config(function($httpProvider,$stateProvider,$locationProvider,$urlRouterProvider){$locationProvider.html5Mode(!0),$httpProvider.defaults.transformRequest=function(data){return void 0===data?data:$.param(data)},$httpProvider.defaults.useXDomain=!0,delete $httpProvider.defaults.headers.common["X-Requested-With"],$httpProvider.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",$httpProvider.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",$httpProvider.defaults.headers["delete"]={"Content-Type":"application/json; charset=UTF-8"},$stateProvider.state("root",{url:"/",views:{header:{templateUrl:"/src/core/layout/header.html",controllerAs:"HeaderController"},footer:{templateUrl:"/src/core/layout/footer.html",controllerAs:"FooterController"}},resolve:{test:function($state){$state.go("about")}}}).state("about",{url:"/about",views:{"main-container@":{templateUrl:"/src/about/index.html",controllerAs:"AboutController"},"header@":{templateUrl:"/src/core/layout/header.html",controllerAs:"HeaderController"}}}).state("posts",{url:"/posts",views:{"main-container@":{templateUrl:"/src/post/index.html",controller:"PostController as vm"},"header@":{templateUrl:"/src/core/layout/header.html",controllerAs:"HeaderController"}}}).state("posts.detail",{url:"/:title",views:{"main-container@":{templateUrl:"/src/post/detail.html",controller:"PostDetailController as vm"},"header@":{templateUrl:"/src/core/layout/header.html",controllerAs:"HeaderController"}}}).state("portfolio",{url:"/portfolio",views:{"main-container@":{templateUrl:"/src/portfolio/list.html",controller:"PortfolioController as vm"},"header@":{templateUrl:"/src/core/layout/header.html",controllerAs:"HeaderController"}}}).state("portfolio.detail",{url:"/:title",views:{"main-container@":{templateUrl:"/src/portfolio/detail.html",controller:"PortfolioDetailController as vm"},"header@":{templateUrl:"/src/core/layout/header.html",controllerAs:"HeaderController"}}}).state("contact",{url:"/contact",views:{"main-container@":{templateUrl:"/src/contact/index.html",controllerAs:"ContactController"},"header@":{templateUrl:"/src/core/layout/header.html",controllerAs:"HeaderController"}}}).state("login",{url:"/login",views:{"main-container@":{templateUrl:"/src/core/security/login.html",controller:"AuthenticationController as auth"},"header@":{templateUrl:"/src/core/layout/header.html",controllerAs:"HeaderController"}}}).state("change-password",{url:"/change-password",views:{"main-container@":{templateUrl:"/src/core/security/change-password.html"},"header@":{templateUrl:"/src/core/layout/header.html",controllerAs:"HeaderController"}}}),$urlRouterProvider.otherwise("/about")}),function(){"use strict";var AboutController=function(){};angular.module("danny").controller("AboutController",[AboutController])}(),function(){"use strict";var ramChangePassword=function($templateCache){console.log($templateCache.get("template/components/change-password.tpl.html"));var ChangePasswordController=function($state){var vm=this;vm.isFormInvalid=!0,vm.showMessage=!1;var isValid=function(){vm.username||vm.currentPassword||vm.newPassword||vm.confirmPassword||(vm.isFormInvalid=!1),vm.isFormInvalid=vm.newPassword!=vm.confirmPassword};vm.submit=function(){isValid()?(vm.showMessage=!0,vm.message="This form is invalid"):(vm.showMessage=!1,$state.go("about"))}},link=function(){};return{restrict:"EA",transclude:!0,scope:{username:"@",currentPassword:"@",newPassword:"@",confirmPassword:"@",submit:"&",isFormInvalid:"@",showMessage:"@",message:"@"},templateUrl:"template/components/change-password.tpl.html",controllerAs:"vm",controller:ChangePasswordController,link:link}};angular.module("danny.ui.change-password",[]).directive("ramChangePassword",["$templateCache",ramChangePassword]),angular.module("template/components/change-password.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/components/change-password.tpl.html",'<div ng-if="vm.showMessage" class="row"><div class="col-md-12 col-xs-12"><div><div class="error">{{vm.message}}</div></div></div></div><div class="row form-horizontal"><div class="form-group col-md-6 col-xs-12"><label class="control-label row-label" for="email">Email:</label><input type="email" id="email" ng-model="vm.username" tabindex="1" class="form-control required" name="email" autofocus /></div><div class="form-group col-md-6 col-xs-12"><label class="control-label row-label" for="pwd">Current Password:</label><input type="password" id="pwd" class="form-control required" tabindex="3" ng-model="vm.currentPassword" name="pwd"/></div><div class="form-group col-md-6 col-xs-12"><label class="control-label row-label" for="pwd">New Password:</label><input type="password" id="pwd" class="form-control required" tabindex="2" ng-model="vm.newPassword" name="pwd"/></div><div class="form-group col-md-6 col-xs-12"><label class="control-label row-label" for="pwd">Confirm Password:</label><input type="password" id="pwd" class="form-control required" tabindex="4" ng-model="vm.confirmPassword" name="pwd"/></div><div class="form-group col-md-6 col-xs-12"><p><button class="form-control btn btn-default" ng-disabled="vm.isFormInvalid" ng-click="vm.submit()">Submit</button></p></div></div></div>')}])}(),function(){"use strict";var ramLogin=function(){var link=function($scope,$element){$scope.user={},$element.find("#login").bind("click",function(){$scope.onSubmit&&"function"==typeof $scope.onSubmit&&$scope.onSubmit({user:$scope.user})})};return{restrict:"EA",transclude:!0,scope:{onSubmit:"&ramOnSubmit"},templateUrl:"template/components/login.tpl.html",link:link}};angular.module("danny.ui.login",[]).directive("ramLogin",["$state",ramLogin]),angular.module("template/components/login.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/components/login.tpl.html",'<div class="row"><div class="col-md-4 col-md-offset-5 col-xs-12 col-xs-offset-2"><div><label for="email">Email:</label><input type="email" id="email" ng-model="user.username" class="required" name="email" autofocus /></div><div><label for="pwd">Password:</label><input type="password" id="pwd" class="required" ng-model="user.password" name="pwd"/></div><p><button id="login" class="btn btn-default" ng-click="onSubmit(user)">Login</button></p></div></div>')}])}(),function(){"use strict";var ContactController=function(){};angular.module("danny").controller("ContactController",["$scope",ContactController])}(),function(){"use strict";var BASE_API="http://admin.abracadaniel.net/api/";angular.module("danny").constant("Constants",{ROUTES:{POSTS:BASE_API+"posts",POST:BASE_API+"post/",PROFILE:BASE_API+"profile",PORTFOLIO:BASE_API+"portfolio",RESUME:BASE_API+"resume",SENDMAIL:BASE_API+"email"},CACHE:{CURRENT_USER:"currentUser",CURRENT_PROFILE:"currentProfile"}})}(),function(){"use strict";var EmailService=function(RestService,Constants,$q){var _sendMail=function(email){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return RestService.postData(Constants.ROUTES.SENDMAIL,null,null,email,_success,"",_error,{showLoader:!0}),deferred.promise};return{sendMail:_sendMail}};angular.module("danny.ui.email.service",[]).factory("EmailService",["RestService","Constants","$q",EmailService])}(),function(){"use strict";var FooterController=function(){};angular.module("danny").controller("FooterController",[FooterController])}(),function(){"use strict";var HeaderController=function(){};angular.module("danny").controller("HeaderController",[HeaderController])}(),function(){"use strict";var ProfileService=function(RestService,Constants,$q){var _getProfile=function(){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return RestService.getData(Constants.ROUTES.PROFILE,null,null,_success,"",_error,{showLoader:!0}),deferred.promise};return{getProfile:_getProfile}};angular.module("danny.ui.profile.service",[]).factory("ProfileService",["RestService","Constants","$q",ProfileService])}(),function(){"use strict";var AuthenticationController=function(LoginService){var _message="turd",_user={},_onSubmit=function(user){user&&LoginService.authenticateUser(user)};return{onSubmit:_onSubmit,message:_message,user:_user}};angular.module("danny").controller("AuthenticationController",["LoginService",AuthenticationController])}(),function(){"use strict";var LoginService=function(RestService,CacheService,Constants,$state){var _authenticateUser=function(user){var _success=function(data){data.user?(CacheService.setItem(Constants.CACHE.CURRENT_USER,data.user),$state.go("posts")):CacheService.getItem(Constants.CACHE.CURRENT_USER)},_error=function(data){console.log(data)};RestService.postData("/api/login",null,null,{username:user.username,password:user.password},_success,"",_error,{showLoader:!0})};return{authenticateUser:_authenticateUser}};angular.module("danny").factory("LoginService",["RestService","CacheService","Constants","$state",LoginService])}(),function(){"use strict";var UtilityService=function(){var _formatStringForURL=function(str){return str.split(" ").join("-")};return{formatStringForURL:_formatStringForURL}};angular.module("danny.ui.utility.service",[]).factory("UtilityService",[UtilityService])}(),function(){"use strict";var PortfolioController=function(PortfolioService,UtilityService,$state){function addProject(){$state.go("portfolio.detail",{title:"new"})}function getPortfolio(){PortfolioService.getPortfolio().then(function(data){vm.portfolio=data})}function editPortfolio(title){$state.go("portfolio.detail",{title:UtilityService.formatStringForURL(title)})}function init(){vm.getPortfolio()}var vm=this;vm.portfolio=[],vm.getPortfolio=getPortfolio,vm.editPortfolio=editPortfolio,vm.addProject=addProject,init()};angular.module("danny").controller("PortfolioController",["PortfolioService","UtilityService","$state",PortfolioController])}(),function(){"use strict";var PortfolioDetailController=function(PortfolioService,UtilityService,Constants,$state){function _savePortfolio(){PortfolioService.savePortfolio(vm.portfolio,$state.params.title).then(function(){$state.go("portfolio")},function(response){console.log(response)})}function _deletePortfolio(){}function _init(){"new"!==$state.params.title&&PortfolioService.getPortfolioByTitle($state.params.title).then(function(data){console.log(data),data[0]&&(data[0].technologies=data[0].technologies.join(", "),data[0].imagePaths=data[0].imagePaths.join(", "),vm.portfolio=data[0])})}var vm=this;vm.portfolio={description:"",isActive:!0,client:"",title:"",workType:"",url:"",category:"",imagePaths:[],technologies:[]},vm.savePortfolio=_savePortfolio,vm.deletePortfolio=_deletePortfolio,vm.init=_init,vm.init()};angular.module("danny").controller("PortfolioDetailController",["PortfolioService","UtilityService","Constants","$state",PortfolioDetailController])}(),function(){"use strict";var PortfolioService=function(RestService,Constants,$q){var _formatStringForUrl=function(str){return str.split(" ").join("-")},_formatTagsForSaving=function(tags){return tags.split(",")},_getPortfolio=function(){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return RestService.getData(Constants.ROUTES.PORTFOLIO,null,null,_success,"",_error,{showLoader:!0}),deferred.promise},_getPortfolioByTitle=function(title){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return RestService.getData(Constants.ROUTES.PORTFOLIO+"/"+_formatStringForUrl(title),null,null,_success,"",_error,{showLoader:!0}),deferred.promise},_savePortfolio=function(portfolio,title){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return portfolio.technologies=_formatTagsForSaving(portfolio.technologies),portfolio.imagePaths=_formatTagsForSaving(portfolio.imagePaths),"new"===title?RestService.postData(Constants.ROUTES.PORTFOLIO,null,null,portfolio,_success,"",_error,{showLoader:!0}):RestService.putPostData(Constants.ROUTES.PORTFOLIO+"/"+_formatStringForUrl(title),null,null,portfolio,_success,"",_error,{showLoader:!0}),deferred.promise},_deletePortfolio=function(){};return{getPortfolio:_getPortfolio,getPortfolioByTitle:_getPortfolioByTitle,savePortfolio:_savePortfolio,deletePortfolio:_deletePortfolio}};angular.module("danny.ui.portfolio.service",[]).factory("PortfolioService",["RestService","Constants","$q",PortfolioService])}(),function(){"use strict";var PostController=function(PostService,UtilityService,$state){function addPost(){$state.go("posts.detail",{title:"new"})}function editPost(title){$state.go("posts.detail",{title:UtilityService.formatStringForURL(title)})}function getPosts(){PostService.getPosts().then(function(data){vm.posts=data,console.log(data)})}function init(){getPosts()}var vm=this;vm.posts={},vm.addPost=addPost,vm.editPost=editPost,init()};angular.module("danny").controller("PostController",["PostService","UtilityService","$state",PostController])}(),function(){"use strict";var PostDetailController=function(CacheService,Constants,PostService,$state){function _savePost(){PostService.savePost(vm.post,$state.params.title).then(function(){$state.go("posts")},function(response){console.log(response)})}function _deletePost(){}function _init(){"new"!==$state.params.title&&PostService.getPost($state.params.title).then(function(data){data[0]&&(data[0].tags=data[0].tags.join(", "),vm.post=data[0])})}var vm=this;vm.post={postBody:"",isActive:!0,isPosted:!1,title:"",preview:"",author:CacheService.getItem(Constants.CACHE.CURRENT_USER).name||"Danny Schreiber",imagePath:"",comments:[],tags:[]},vm.savePost=_savePost,vm.deletePost=_deletePost,vm.init=_init,vm.init()};angular.module("danny").controller("PostDetailController",["CacheService","Constants","PostService","$state",PostDetailController])}(),function(){"use strict";var PostService=function(RestService,Constants,$q){var _formatStringForUrl=function(str){return str.split(" ").join("-")},_formatTagsForSaving=function(tags){return tags.split(",")},_getPosts=function(){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return RestService.getData(Constants.ROUTES.POSTS,null,null,_success,"",_error,{showLoader:!0}),deferred.promise},_getPost=function(title){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return RestService.getData(Constants.ROUTES.POST+_formatStringForUrl(title),null,null,_success,"",_error,{showLoader:!0}),deferred.promise},_savePost=function(post,title){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return post.tags=_formatTagsForSaving(post.tags),"new"===title?RestService.postData(Constants.ROUTES.POSTS,null,null,post,_success,"",_error,{showLoader:!0}):(console.log("title: ",title),RestService.putPostData(Constants.ROUTES.POST+_formatStringForUrl(title),null,null,post,_success,"",_error,{showLoader:!0})),deferred.promise},_deletePost=function(){};return{getPosts:_getPosts,getPost:_getPost,savePost:_savePost,deletePost:_deletePost}};angular.module("danny.ui.post.service",[]).factory("PostService",["RestService","Constants","$q",PostService])}(),function(){"use strict";var ResumeService=function(RestService,Constants,$q){var _getResume=function(){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return RestService.getData(Constants.ROUTES.RESUME,null,null,_success,"",_error,{showLoader:!0}),deferred.promise},_saveResume=function(post){var deferred=$q.defer(),_success=function(data){deferred.resolve(data)},_error=function(data){deferred.resolve(data)};return RestService.postData(Constants.ROUTES.RESUME,null,null,post,_success,"",_error,{showLoader:!0}),deferred.promise};return{getResume:_getResume,saveResume:_saveResume}};angular.module("danny.ui.resume.service",[]).factory("ResumeService",["RestService","Constants","$q",ResumeService])}();